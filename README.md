# ScribotV2

Telegram-бот для автоматической генерации студенческих работ (курсовых, дипломных, рефератов) с использованием языковых моделей. Бот создает уникальные работы на основе темы, выбранной пользователем, и предоставляет их в форматах PDF и DOCX.

**Попробовать бота:** [@coursework_scribot](https://t.me/coursework_scribot)

## CI/CD

В проекте настроен CI/CD с автоматическим деплоем в Yandex Cloud. При пуше в ветку `main` происходит автоматическая сборка Docker-образа и развертывание на сервере.

## Структура проекта

### Основные модули

- **`main.py`** - Точка входа приложения, инициализация бота и диспетчера
- **`core/`** - Основная бизнес-логика:
  - `work_generator.py` - Оркестрация процесса генерации работы
  - `content_generator.py` - Генерация содержания через LLM с контролем объема
  - `document_converter.py` - Конвертация LaTeX в PDF и DOCX
  - `latex_template.py` - Создание LaTeX-документов
  - `page_calculator.py` - Расчет количества страниц и валидация плана
  - `settings.py` - Настройки приложения
  - `states.py` - Состояния FSM для обработки заказов
  - `file_sender.py` - Отправка файлов пользователям
  - `test_data_generator.py` - Генерация тестовых данных для тестирования
- **`gpt/`** - Работа с языковыми моделями:
  - `assistant.py` - Интеграция с OpenRouter API, управление историей разговоров
- **`handlers/`** - Обработчики команд и сообщений:
  - `common.py` - Общие команды (/start, /help, главное меню)
  - `order_handlers.py` - Обработка заказов на генерацию работ
  - `payment_handlers.py` - Обработка платежей через Telegram Stars
  - `subscription_handlers.py` - Проверка подписки на каналы
- **`db/`** - Работа с базой данных:
  - `database.py` - Основные функции для работы с БД
  - `migration_manager.py` - Система миграций базы данных
  - `migrations/` - SQL-миграции схемы БД
- **`services/`** - Вспомогательные сервисы:
  - `subscription_service.py` - Проверка подписки пользователей на каналы
- **`utils/`** - Утилиты:
  - `admin_logger.py` - Логирование действий для администратора
  - `llm_logger.py` - Логирование запросов к LLM
- **`keyboards/`** - Inline-клавиатуры для интерфейса бота
- **`tests/`** - Тесты приложения
- **`scripts/`** - Вспомогательные скрипты
- **`deployment/`** - Файлы для развертывания (Docker, CI/CD)
- **`docs/`** - Документация проекта

## Документация

- [Настройка и развертывание](deployment/README.md) - Установка, настройка переменных окружения и деплой
- [Системные требования](docs/SYSTEM_REQUIREMENTS.md) - Требования к системе
- [Генерация DOCX](docs/DOCX_GENERATION.md) - Детали работы с DOCX файлами
- [Решение проблем](docs/TROUBLESHOOTING.md) - Частые проблемы и их решения
- [CI/CD переменные](docs/CI_CD_VARIABLES.md) - Переменные для CI/CD

## Быстрый старт

Для установки и настройки бота см. [deployment/README.md](deployment/README.md)
